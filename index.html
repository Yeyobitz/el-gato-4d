<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Metaetiquetas esenciales -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4D TikTakToe - Multiuniversal Gato</title>
    <meta name="description" content="Juega al innovador 4D TikTakToe, también conocido como Gato Multiuniversal. Desafía a tus amigos o a la IA en este emocionante juego de estrategia en cuatro dimensiones.">
    <meta name="keywords" content="4D TikTakToe, Gato Multiuniversal, juego de mesa, juego en línea, tic-tac-toe 4D, tres en raya 4D, juego de estrategia, juego multijugador, IA, inteligencia artificial, Ceros y Cruces, Tres en Línea, Tatetí, Triqui, La Vieja, Michi, Totito, Equis Cero, Gato 4D, OXO, Noughts and Crosses, Jogo da Velha, Jogo do Galo, Zero o Cruz, XOXO, Morpion, Ta Te Ti, Cat's Game, Quantum TicTacToe, Multidimensional TicTacToe">
    <meta name="author" content="Yeyobitz">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="4D TikTakToe - Multiuniversal Gato">
    <meta property="og:description" content="Desafía a tus amigos o a la IA en el innovador juego 4D TikTakToe. ¡Una nueva dimensión en juegos de estrategia!">
    <meta property="og:image" content="https://multiuniversalgato.netlify.app/images/og-image.png">
    <meta property="og:url" content="https://multiuniversalgato.netlify.app">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="4D TikTakToe - Multiuniversal Gato">
    <meta name="twitter:description" content="Desafía a tus amigos o a la IA en el innovador juego 4D TikTakToe. ¡Una nueva dimensión en juegos de estrategia!">
    <meta name="twitter:image" content="https://multiuniversalgato.netlify.app/images/og-image.png">
    
    <!-- Favicon e iconos para dispositivos -->
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    
    <!-- Enlaces a hojas de estilo y fuentes -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P|Roboto:400,700&display=swap" rel="stylesheet">
    
    <!-- Datos estructurados Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebApplication",
      "name": "4D TikTakToe - Multiuniversal Gato",
      "url": "https://multiuniversalgato.netlify.app",
      "description": "Juega al innovador 4D TikTakToe, también conocido como Gato Multiuniversal. Desafía a tus amigos o a la IA en este emocionante juego de estrategia en cuatro dimensiones.",
      "applicationCategory": "Game",
      "operatingSystem": "All",
      "browserRequirements": "Requires JavaScript. Compatible with modern browsers.",
      "author": {
        "@type": "Person",
        "name": "Yeyobitz",
        "url": "https://yeyobitz.dev"
      },
      "image": "https://multiuniversalgato.netlify.app/images/og-image.png",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "inLanguage": "es"
    }
    </script>
</head>
<body>
    <!-- Fondo de estrellas -->
    <section id="stars">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </section>
    <!-- Menú principal -->
    <!-- Contenedor principal -->
    <div id="main-container">
        <!-- Menú principal -->
        <div id="main-menu" class="menu">
            <div class="logo-container">
                <h1 class="title">Multiuniversal<br/>Gato</h1>
                <br/>
                <h2 class="subtitle">A 4D TikTakToe by <a class="glitch" href="https://yeyobitz.dev">@Yeyobitz</a></h2> 
            </div>
            <div class="menu-options">
                <button onclick="showDifficulty('cpu')">P1 vs CPU</button>
                <button onclick="startGame('pvp')">P1 vs P2</button>
                <button id="instructions-button" onclick="showInstructions()">Reglas</button>
                <button onclick="showGeneralStats()">Estadísticas</button>
            </div>
        </div>

        <!-- Menú de dificultad -->
        <div id="difficulty-menu" class="menu" style="display: none; margin-top: 36px;">
            <h2>Seleccione la dificultad</h2>
            <div class="menu-options">
                <button onclick="startGame('cpu', 'easy')">Fácil</button>
                <button onclick="startGame('cpu', 'medium')">Medio</button>
                <button onclick="startGame('cpu', 'hard')">Difícil</button>
                <button onclick="backToMainMenu()">Atrás</button>
            </div>
        </div>

    <!-- Contenedor del juego -->
    <div id="game-container" style="display: none;">
        <div id="timer"><span id="time-elapsed">00:00</span></div>
        <div id="game-info">
            <!-- Mensaje de turno debajo del contenedor del juego -->
            <div id="message"></div>
        </div>
        <div id="game-content">
            <div id="board"></div>
        </div>
        <div id="game-controls">
            <button id="pause-button" onclick="pauseGame()">PAUSA</button>
        </div>
    </div>


    <!-- Ventana Modal para Empate Inminente -->
    <div id="draw-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>¡El empate es inminente!</h2>
            <br/>
            <p>¿Deseas reintentar?</p>
            <br/>
            <button onclick="retryGame()">Reintentar</button>
            <button onclick="backToMainMenu()">Menú Principal</button>
        </div>
    </div>

    <!-- Ventana Modal para Fin de Juego -->
    <div id="game-over-modal" class="modal" style="display: none;">
        <div class="modal-content">

            <!-- Contenedor del resumen de partida -->
            <div id="game-over-content">
                <h2 id="game-over-title">¡Felicidades<br>Jugador!</h2>
                <div class="statistics">
                    <p id="game-over-turns">
                        <span class="label"><strong>Turnos</strong></span>
                        <span class="separator">· · · · · · ·</span>
                        <span class="value">0</span>
                    </p>
                    <p id="game-over-time">
                        <span class="label"><strong>Tiempo total</strong></span>
                        <span class="separator">· · · · · · ·</span>
                        <span class="value">00:00</span>
                    </p>
                    <p id="game-over-average-time">
                        <span class="label"><strong>Promedio por turno</strong></span>
                        <span class="separator">· · · · · · ·</span>
                        <span class="value">0s</span>
                    </p>
                    <p id="game-over-boards-x">
                        <span class="label"><strong>Mini-boards de X</strong></span>
                        <span class="separator">· · · · · · · ·</span>
                        <span class="value">0</span>
                    </p>
                    <p id="game-over-boards-o">
                        <span class="label"><strong>Mini-boards de O</strong></span>
                        <span class="separator">· · · · · · · ·</span>
                        <span class="value">0</span>
                    </p>
                    <!-- Mostrar dificultad si el modo es P1 vs IA -->
                    <p id="game-over-difficulty" style="display: none;">
                        <span class="label"><strong>Dificultad</strong></span>
                        <span class="separator">· · · · · · ·</span>
                        <span class="value">[Dificultad]</span>
                    </p>
                </div>
            </div>

            <!-- Contenedor de estadísticas generales -->
            <div id="game-over-stats" style="display: none;">
                <div class="overall-statistics">
                    <!-- Aquí se mostrarán las estadísticas generales según el modo de juego -->
                </div>
            </div>

            <div class="modal-buttons">
                <button id="toggle-stats-button" style="display: none;" onclick="toggleGameOverStats()">Ver Estadísticas Generales</button>
                <button onclick="resetGame()">Reiniciar</button>
                <button onclick="backToMainMenu()">Menú</button>
            </div>
        </div>
    </div>

    <!-- Modal de Estadísticas Generales -->
    <div id="general-stats-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Estadísticas Generales</h2>
            <div class="overall-statistics">
                <!-- Estadísticas de P1 vs IA por dificultad -->
                <!-- Las estadísticas se generan dinámicamente desde script.js -->
            </div>
            <button onclick="closeGeneralStats()">Volver al Menú</button>
        </div>
    </div>


    <!-- Ventana Modal para IA pensando -->
    <div id="ai-thinking-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>IA pensando<span id="dots"></span></h2>
        </div>
    </div>

<!-- Modal de Instrucciones -->
<div id="instructions-modal" class="modal">
    <div class="modal-content"><span class="close" onclick="hideInstructions()">&times;</span> 
        <h2>Multiuniversal Gato</h2>
    </br>
        <h3>Objetivo del Juego</h3>
        <p>Gana tres mini-tableros en línea (horizontal, vertical o diagonal) en el tablero principal o ten más tableros ganados.</p>
    </br>
        <h3>Cómo Jugar</h3>
        <p>El juego se desarrolla en un tablero principal con 9 mini-tableros (3x3).</p>
        <p>Dos jugadores, 'X' y 'O', se turnan para colocar sus símbolos.</p>
        <p>'X' comienza jugando en cualquier casilla de cualquier mini-tablero.</p>
            <img src="images/instrucciones1.webp" alt="Tablero principal y mini-tableros">
        </br>
        <h3>Regla de Envío</h3>
        <p>La casilla donde juegas determina el mini-tablero donde el siguiente jugador debe jugar.</p>
        <p>Ejemplo: si juegas en la esquina superior izquierda, tu oponente debe jugar en el mini-tablero superior izquierdo.</p>
        <p>
            <img src="images/instrucciones2.webp" alt="Ejemplo de regla de envío">
        </p>
        <h3>Ganar un Mini-Tablero</h3>
        <p>Forma tres de tus símbolos en línea en un mini-tablero para ganarlo.</p>
        <p>
            <img src="images/instrucciones3.webp" alt="Mini-tablero ganado">
        </p>
        <h3>Mini-Tableros Ocupados</h3>
        <p>Si el mini-tablero al que te envían está lleno o ganado, puedes jugar en cualquier mini-tablero disponible.</p>
        <p>
            <img src="images/instrucciones5.webp" alt="Mini-tableros disponibles para jugar">
        </p>
        <h3>Ganar el Juego</h3>
        <p>Gana tres mini-tableros en línea en el tablero principal para vencer o ten más mini-tableros controlados que tu rival</p>
        <p>
            <img src="images/instrucciones4.webp" alt="Victoria en el juego">
        </p>
        
        <h3>Controles</h3>
        <p>Haz clic en la casilla donde deseas jugar. El juego te mostrará dónde debes jugar.</p>
    </br>
        <h3>¡Diviértete!</h3>
        </div>
</div>

<!-- Modal de Pausa -->
<div id="pause-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <h2></h2>
        <button onclick="resumeGame()">Continuar</button>
        <button onclick="resetGame()">Reiniciar</button>
        <button onclick="backToMainMenu()">Menú</button>
        <button onclick="showInstructions()">Reglas</button>

        <div id="music-player" style="text-align: center;">
            <div class="volume-control">
                <label for="bgm-volume">Volumen de Música</label>
                <input type="range" id="bgm-volume" min="0" max="1" step="0.05" value="1" onchange="setBGMVolume(this.value)">
            </div>
            <div id="music-controls" class="controls-container">
                <button class="prev-btn" onclick="previousSong()"></button>
                <button class="play-btn" onclick="togglePlayPause()"></button>
                <button class="next-btn" onclick="nextSong()"></button>
            </div>            
            
            <p id="current-song-name"><span id="song-name">None</span></p>
        </div>
        
    </div>
</div>


    <!-- Elementos de audio para sonidos -->
    <audio id="place-sound" src="sounds/place.mp3"></audio>
    <audio id="win-sound" src="sounds/win.mp3"></audio>
    <audio id="draw-sound" src="sounds/draw.mp3"></audio>
    <audio id="click-sound" src="sounds/click.mp3"></audio>

    <!-- Elementos de audio para música de fondo -->
    <audio id="bgm-main-menu" src="music/main_menu.ogg" loop></audio>
    <audio id="bgm-game" src="" loop></audio>
    
    </div>
    <script src="script.js"></script>
</body>
</html>
