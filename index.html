<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EL GATO 4D</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Fuentes para diseño retro -->
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P|Roboto:400,700&display=swap" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
</head>
<body>
    <!-- Fondo de estrellas -->
    <section id="stars">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </section>
    <!-- Menú principal -->
    <!-- Contenedor principal -->
    <div id="main-container">
        <!-- Menú principal -->
        <div id="main-menu" class="menu">
            <div class="logo-container">
                <h1 class="title">Multiuniversal<br/>Gato</h1>
                <br/>
                <h2 class="subtitle">A 4D TikTakToe by <a class="glitch" href="https://yeyobitz.dev">@Yeyobitz</a></h2> 
            </div>
            <div class="menu-options">
                <button onclick="showDifficulty('cpu')">P1 vs CPU</button>
                <button onclick="startGame('pvp')">P1 vs P2</button>
                <button id="instructions-button" onclick="showInstructions()">Instrucciones</button>
            </div>
        </div>

        <!-- Menú de dificultad -->
        <div id="difficulty-menu" class="menu" style="display: none; margin-top: 36px;">
            <h2>Seleccione la dificultad</h2>
            <div class="menu-options">
                <button onclick="startGame('cpu', 'easy')">Fácil</button>
                <button onclick="startGame('cpu', 'medium')">Medio</button>
                <button onclick="startGame('cpu', 'hard')">Difícil</button>
                <button onclick="backToMainMenu()">Atrás</button>
            </div>
        </div>

    <!-- Contenedor del juego -->
    <div id="game-container" style="display: none;">
        <div id="timer"><span id="time-elapsed">00:00</span></div>
        <div id="game-info">
            <!-- Mensaje de turno debajo del contenedor del juego -->
            <div id="message"></div>
        </div>
        <div id="game-content">
            <div id="board"></div>
        </div>
        <div id="game-controls">
            <button id="pause-button" onclick="pauseGame()">PAUSA</button>
        </div>
    </div>


    <!-- Ventana Modal para Empate Inminente -->
    <div id="draw-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>¡El empate es inminente!</h2>
            <p>¿Deseas reintentar?</p>
            <button onclick="retryGame()">Reintentar</button>
            <button onclick="backToMainMenu()">Menú Principal</button>
        </div>
    </div>

    <!-- Ventana Modal para Fin de Juego -->
    <div id="game-over-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2 id="game-over-message">¡Juego Terminado!</h2>
            <p id="game-over-details"></p>
            <button onclick="resetGame()">Reiniciar</button>
            <button onclick="backToMainMenu()">Menú</button>
        </div>
    </div>

    <!-- Ventana Modal para IA pensando -->
    <div id="ai-thinking-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>IA pensando<span id="dots"></span></h2>
        </div>
    </div>

<!-- Modal de Instrucciones -->
<div id="instructions-modal" class="modal">
    <div class="modal-content"><span class="close" onclick="hideInstructions()">&times;</span> 
        <h2>Multiuniversal Gato</h2>
    </br>
        <h3>Objetivo del Juego</h3>
        <p>Gana tres mini-tableros en línea (horizontal, vertical o diagonal) en el tablero principal o ten más tableros ganados.</p>
    </br>
        <h3>Cómo Jugar</h3>
        <p>El juego se desarrolla en un tablero principal con 9 mini-tableros (3x3).</p>
        <p>Dos jugadores, 'X' y 'O', se turnan para colocar sus símbolos.</p>
        <p>'X' comienza jugando en cualquier casilla de cualquier mini-tablero.</p>
            <img src="images/instrucciones1.webp" alt="Tablero principal y mini-tableros">
        </br>
        <h3>Regla de Envío</h3>
        <p>La casilla donde juegas determina el mini-tablero donde el siguiente jugador debe jugar.</p>
        <p>Ejemplo: si juegas en la esquina superior izquierda, tu oponente debe jugar en el mini-tablero superior izquierdo.</p>
        <p>
            <img src="images/instrucciones2.webp" alt="Ejemplo de regla de envío">
        </p>
        <h3>Ganar un Mini-Tablero</h3>
        <p>Forma tres de tus símbolos en línea en un mini-tablero para ganarlo.</p>
        <p>
            <img src="images/instrucciones3.webp" alt="Mini-tablero ganado">
        </p>
        <h3>Mini-Tableros Ocupados</h3>
        <p>Si el mini-tablero al que te envían está lleno o ganado, puedes jugar en cualquier mini-tablero disponible.</p>
        <p>
            <img src="images/instrucciones5.webp" alt="Mini-tableros disponibles para jugar">
        </p>
        <h3>Ganar el Juego</h3>
        <p>Gana tres mini-tableros en línea en el tablero principal para vencer o ten más mini-tableros controlados que tu rival</p>
        <p>
            <img src="images/instrucciones4.webp" alt="Victoria en el juego">
        </p>
        
        <h3>Controles</h3>
        <p>Haz clic en la casilla donde deseas jugar. El juego te mostrará dónde debes jugar.</p>
    </br>
        <h3>¡Diviértete!</h3>
        </div>
</div>

<!-- Modal de Pausa -->
<div id="pause-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <h2></h2>
        <button onclick="resumeGame()">Continuar</button>
        <button onclick="resetGame()">Reiniciar</button>
        <button onclick="backToMainMenu()">Menú</button>
        <button onclick="showInstructions()">Reglas</button>

        <div id="music-player" style="text-align: center;">
            <div class="volume-control">
                <label for="bgm-volume">Volumen de Música</label>
                <input type="range" id="bgm-volume" min="0" max="1" step="0.05" value="1" onchange="setBGMVolume(this.value)">
            </div>
            <div id="music-controls" class="controls-container">
                <button class="prev-btn" onclick="previousSong()"></button>
                <button class="play-btn" onclick="togglePlayPause()"></button>
                <button class="next-btn" onclick="nextSong()"></button>
            </div>            
            
            <p id="current-song-name"><span id="song-name">None</span></p>
        </div>
        
    </div>
</div>


    <!-- Elementos de audio para sonidos -->
    <audio id="place-sound" src="sounds/place.mp3"></audio>
    <audio id="win-sound" src="sounds/win.mp3"></audio>
    <audio id="draw-sound" src="sounds/draw.mp3"></audio>
    <audio id="click-sound" src="sounds/click.mp3"></audio>

    <!-- Elementos de audio para música de fondo -->
    <audio id="bgm-main-menu" src="music/main_menu.ogg" loop></audio>
    <audio id="bgm-game" src="" loop></audio>
    
    </div>
    <script src="script.js"></script>
</body>
</html>
